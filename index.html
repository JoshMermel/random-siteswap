<!doctype html>
<html>

<body onload="update()">
<h1>Random Siteswaps</h1>

<div>
Siteswap Length: <input type="text" id="length" value="3" onchange="update()"><br>
Number of Objects: <input type="text" id="num_balls" value="5" onchange="update()"><br>
Max Multiplex at once: <input type="text" id="max_multiplicity" value="2" onchange="update()"><br>
</div>

<div>
  <input type="radio" id="async" name="is_sync" value="async"
         onclick="update()" checked>
  <label for="async">Async</label>
</div>
<div>
  <input type="radio" id="sync" name="is_sync" value="sync"
         onclick="update()" checked>
  <label for="sync">Sync</label>
</div>

<button onclick="update()" type="button">Another one</button>

<p style="font-size:30px" id="siteswap_out"></p>

<canvas id="canvas" width=350px height=600px></canvas>

</body>

<script src="random.js"></script>
<script src="anim.js"></script>
<script>
function update() {
  let length = document.getElementById("length").value;
  let num_balls = document.getElementById("num_balls").value;
  let max_multiplicity = document.getElementById("max_multiplicity").value;
  let is_sync = (document.querySelector('input[name="is_sync"]:checked').value === "sync");

  if (length < 1) {
    document.getElementById("siteswap_out").innerHTML = "Length must be 1 or more";
  } else if (num_balls < 1) {
    document.getElementById("siteswap_out").innerHTML = "Number of objects must be 1 or more";
  } else if (max_multiplicity < 1) {
    document.getElementById("siteswap_out").innerHTML = "Max multiplicity must be 1 or more";
  } else {
    
    let siteswap = randomSiteswap(length, num_balls, max_multiplicity, is_sync);
    let siteswap_str = "";
    if (is_sync) {
      siteswap_str = printSyncSiteswap(siteswap);
    } else {
      siteswap_str = printAsyncSiteswap(siteswap);
    }

    document.getElementById("siteswap_out").innerHTML = siteswap_str;
    setSiteswap(siteswap, false, is_sync);
    StartAnimation();
  }
}
</script>
</html>
